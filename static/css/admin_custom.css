/*
 * Despair Chinese — Custom Admin Styles
 * Overrides Jazzmin "darkly" theme to match the main site's
 * dark amber / gold palette.
 *
 * Loaded via JAZZMIN_SETTINGS["custom_css"] = "css/admin_custom.css"
 */

/* ── CSS Variables ──────────────────────────────────────────────── */
:root {
    --dc-gold:      #d4a017;
    --dc-gold-lt:   #f0c040;
    --dc-dark:      #0d0603;
    --dc-surface:   #150b04;
    --dc-card:      #1c1008;
    --dc-border:    rgba(212,160,23,0.18);
    --dc-text:      #f5f0e8;
    --dc-muted:     #9a8870;
    --dc-danger:    #c0392b;
    --dc-success:   #1e8449;
}

/* ── Root page background ───────────────────────────────────────── */
body,
html,
#main-content,
.container-fluid,
.content-wrapper,
.main-sidebar,
.main-header,
.wrapper {
    background-color: var(--dc-surface) !important;
    color: var(--dc-text) !important;
}

/* Force white text everywhere */
p, span, td, th, li, div, h1, h2, h3, h4, h5, h6, label {
    color: inherit;
}

/* ── Top navbar ─────────────────────────────────────────────────── */
.main-header.navbar {
    background: linear-gradient(135deg, var(--dc-dark) 0%, #1a0f00 100%) !important;
    border-bottom: 1px solid var(--dc-gold) !important;
}

.main-header .navbar-brand,
.main-header .nav-link,
.main-header .brand-text {
    color: var(--dc-gold-lt) !important;
}

.main-header .nav-link:hover {
    color: #fff !important;
}

/* ── Sidebar ────────────────────────────────────────────────────── */
.main-sidebar {
    background: var(--dc-dark) !important;
    border-right: 1px solid var(--dc-border) !important;
}

.sidebar .nav-sidebar .nav-link,
.sidebar .nav-sidebar .nav-item > .nav-link {
    color: var(--dc-muted) !important;
    border-radius: 6px !important;
    margin: 1px 8px !important;
    transition: all 0.2s ease !important;
}

.sidebar .nav-sidebar .nav-link:hover,
.sidebar .nav-sidebar .nav-link.active,
.sidebar .nav-sidebar > .nav-item.menu-open > .nav-link {
    background: rgba(200, 137, 42, 0.15) !important;
    color: var(--dc-gold-lt) !important;
}

.sidebar .nav-sidebar .nav-link i {
    color: var(--dc-gold) !important;
}

/* Brand in sidebar */
.brand-link {
    background: var(--dc-dark) !important;
    border-bottom: 1px solid var(--dc-border) !important;
}

.brand-link .brand-text,
.brand-link:hover .brand-text {
    color: var(--dc-gold-lt) !important;
}

/* ── Content area ───────────────────────────────────────────────── */
.content-wrapper {
    background-color: var(--dc-surface) !important;
}

/* Page header / breadcrumbs */
.content-header {
    background: transparent !important;
}

.content-header h1,
.content-header .breadcrumb-item.active {
    color: var(--dc-text) !important;
}

.content-header .breadcrumb-item a {
    color: var(--dc-gold) !important;
}

/* ── Cards / modules ────────────────────────────────────────────── */
.card,
.module,
.jazzmin-module {
    background: var(--dc-card) !important;
    border: 1px solid var(--dc-border) !important;
    border-radius: 10px !important;
}

.card-header,
.module caption {
    background: rgba(200, 137, 42, 0.12) !important;
    border-bottom: 1px solid var(--dc-border) !important;
    color: var(--dc-gold-lt) !important;
    font-weight: 600 !important;
}

.card-body {
    background: var(--dc-card) !important;
}

/* ── Tables ─────────────────────────────────────────────────────── */
.table,
#result_list {
    color: var(--dc-text) !important;
}

.table thead th,
#result_list thead th {
    background: rgba(200, 137, 42, 0.1) !important;
    color: var(--dc-gold-lt) !important;
    border-color: var(--dc-border) !important;
    text-transform: uppercase;
    font-size: 0.75rem;
    letter-spacing: 0.05em;
}

.table tbody tr,
#result_list tbody tr {
    border-color: var(--dc-border) !important;
    transition: background 0.15s;
}

.table tbody tr:hover,
#result_list tbody tr:hover,
.table tbody tr.selected,
#result_list tbody tr.selected {
    background: rgba(200, 137, 42, 0.07) !important;
}

.table td,
.table th {
    border-color: var(--dc-border) !important;
    color: var(--dc-text) !important;
}

/* ── Pagination / action bar ────────────────────────────────────── */
.pagination .page-link {
    background: var(--dc-card) !important;
    border-color: var(--dc-border) !important;
    color: var(--dc-gold) !important;
}

.pagination .page-item.active .page-link {
    background: var(--dc-gold) !important;
    border-color: var(--dc-gold) !important;
    color: #000 !important;
}

/* ── Buttons ────────────────────────────────────────────────────── */
.btn-primary,
input[type="submit"] {
    background: var(--dc-gold) !important;
    border-color: var(--dc-gold) !important;
    color: #000 !important;
}

.btn-primary:hover,
input[type="submit"]:hover {
    background: var(--dc-gold-lt) !important;
    border-color: var(--dc-gold-lt) !important;
}

.btn-secondary {
    background: #2a2018 !important;
    border-color: var(--dc-border) !important;
    color: var(--dc-text) !important;
}

.btn-success {
    background: var(--dc-success) !important;
    border-color: var(--dc-success) !important;
}

.btn-danger {
    background: var(--dc-danger) !important;
    border-color: var(--dc-danger) !important;
}

/* ── Forms / inputs ─────────────────────────────────────────────── */
.form-control,
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"],
textarea,
select {
    background: #120d07 !important;
    border: 1px solid var(--dc-border) !important;
    color: var(--dc-text) !important;
    border-radius: 6px !important;
}

.form-control:focus,
input:focus,
textarea:focus,
select:focus {
    border-color: var(--dc-gold) !important;
    box-shadow: 0 0 0 3px rgba(200, 137, 42, 0.2) !important;
}

label,
.form-label,
.help-block {
    color: var(--dc-muted) !important;
}

/* ── Changeform fieldsets ───────────────────────────────────────── */
fieldset {
    border: 1px solid var(--dc-border) !important;
    border-radius: 8px !important;
    padding: 1rem !important;
    margin-bottom: 1.5rem !important;
}

fieldset legend h2,
fieldset h2 {
    color: var(--dc-gold-lt) !important;
    font-size: 0.85rem !important;
    text-transform: uppercase;
    letter-spacing: 0.06em;
}

/* ── Status pills ───────────────────────────────────────────────── */
.badge.bg-success     { background: var(--dc-success) !important; }
.badge.bg-warning     { background: var(--dc-gold) !important; color: #000 !important; }
.badge.bg-danger      { background: var(--dc-danger) !important; }

/* ── Footer ─────────────────────────────────────────────────────── */
.main-footer {
    background: var(--dc-dark) !important;
    border-top: 1px solid var(--dc-border) !important;
    color: var(--dc-muted) !important;
}

/* ── Dashboard stat cards (our custom template) ─────────────────── */
[class*="stat-card"] {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

[class*="stat-card"]:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 24px rgba(200, 137, 42, 0.15);
}

/* ── Links ──────────────────────────────────────────────────────── */
a {
    color: var(--dc-gold) !important;
}

a:hover {
    color: var(--dc-gold-lt) !important;
}

/* ── Recent Actions sidebar ─────────────────────────────────────── */
#recent-actions-module li {
    border-bottom: 1px solid var(--dc-border) !important;
    padding: 4px 0 !important;
}

/* ── Scroll bar ─────────────────────────────────────────────────── */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: var(--dc-dark); }
::-webkit-scrollbar-thumb { background: var(--dc-border); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--dc-gold); }

/* ── Select2 dropdowns ──────────────────────────────────────────── */
.select2-container--default .select2-selection--single,
.select2-container--default .select2-selection--multiple {
    background: #120d07 !important;
    border: 1px solid var(--dc-border) !important;
    color: var(--dc-text) !important;
    border-radius: 6px !important;
}
.select2-container--default .select2-selection--single .select2-selection__rendered {
    color: var(--dc-text) !important;
}
.select2-container--default .select2-results__option {
    background: var(--dc-card) !important;
    color: var(--dc-text) !important;
}
.select2-container--default .select2-results__option--highlighted[aria-selected] {
    background: rgba(212,160,23,0.2) !important;
    color: var(--dc-gold-lt) !important;
}
.select2-dropdown {
    background: var(--dc-card) !important;
    border-color: var(--dc-border) !important;
}
.select2-search--dropdown .select2-search__field {
    background: #120d07 !important;
    border-color: var(--dc-border) !important;
    color: var(--dc-text) !important;
}

/* ── Login page ─────────────────────────────────────────────────── */
body.login-page,
.login-page .login-box,
.login-page .login-card-body {
    background: var(--dc-dark) !important;
}
.login-page .login-box-msg {
    color: var(--dc-gold-lt) !important;
}
.login-page .input-group-text {
    background: #1a1005 !important;
    border-color: var(--dc-border) !important;
    color: var(--dc-muted) !important;
}

/* ── Inline/Tabular inlines ─────────────────────────────────────── */
.inline-group,
.tabular,
.stacked {
    border: 1px solid var(--dc-border) !important;
    border-radius: 8px !important;
    margin-bottom: 1rem !important;
    overflow: hidden;
}
.inline-related h3 {
    background: rgba(212,160,23,0.1) !important;
    color: var(--dc-gold-lt) !important;
    padding: 0.5rem 1rem !important;
    margin: 0 !important;
    font-size: 0.8rem !important;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}
.inline-related .add-row a {
    color: var(--dc-gold) !important;
}
.delete-row a, .inline-deletelink {
    color: var(--dc-danger) !important;
}

/* ── Action bar (change_list actions) ───────────────────────────── */
.actions {
    background: rgba(212,160,23,0.06) !important;
    border-bottom: 1px solid var(--dc-border) !important;
}
.actions label,
.actions select {
    color: var(--dc-text) !important;
}
.actions select {
    background: var(--dc-card) !important;
    border-color: var(--dc-border) !important;
}

/* ── Filter sidebar ─────────────────────────────────────────────── */
#changelist-filter {
    background: var(--dc-card) !important;
    border-left: 1px solid var(--dc-border) !important;
}
#changelist-filter h2,
#changelist-filter h3 {
    background: rgba(212,160,23,0.1) !important;
    color: var(--dc-gold-lt) !important;
    padding: 0.5rem 1rem;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.06em;
}
#changelist-filter li.selected a {
    color: var(--dc-gold-lt) !important;
    font-weight: 600;
}

/* ── Messages (Django messages) ─────────────────────────────────── */
ul.messagelist li {
    border-radius: 6px !important;
    margin-bottom: 6px;
}
ul.messagelist li.success {
    background: rgba(212,160,23,0.12) !important;
    border-left: 3px solid var(--dc-gold) !important;
    color: var(--dc-gold-lt) !important;
}
ul.messagelist li.error {
    background: rgba(192,57,43,0.12) !important;
    border-left: 3px solid var(--dc-danger) !important;
    color: #e74c3c !important;
}
ul.messagelist li.warning {
    background: rgba(212,160,23,0.08) !important;
    border-left: 3px solid var(--dc-gold) !important;
    color: var(--dc-gold) !important;
}

/* ── Submit row ─────────────────────────────────────────────────── */
.submit-row {
    background: var(--dc-card) !important;
    border-top: 1px solid var(--dc-border) !important;
}
.submit-row a.deletelink {
    background: var(--dc-danger) !important;
    color: #fff !important;
}
.submit-row a.deletelink:hover {
    background: #a93226 !important;
}

/* ── Search bar ─────────────────────────────────────────────────── */
#toolbar,
#changelist-search {
    background: transparent !important;
}
#searchbar {
    background: #120d07 !important;
    border-color: var(--dc-border) !important;
    color: var(--dc-text) !important;
}

/* ── Jazzmin nav tabs (top icons) ───────────────────────────────── */
.nav-tabs .nav-link {
    color: var(--dc-muted) !important;
    border-color: transparent;
}
.nav-tabs .nav-link.active {
    background: var(--dc-card) !important;
    border-color: var(--dc-border) !important;
    color: var(--dc-gold-lt) !important;
}

/* ── User menu / profile dropdown ──────────────────────────────── */
/*
 * Jazzmin uses Bootstrap 4's data-toggle="dropdown".
 * AdminLTE's .main-header can inadvertently clip the dropdown via
 * overflow hidden on inner containers. These rules ensure it opens.
 */
.main-header.navbar,
.main-header .navbar-nav,
.main-header .nav-item.dropdown {
    overflow: visible !important;
}

#jazzy-usermenu {
    z-index: 9999 !important;
    background: var(--dc-card) !important;
    border: 1px solid var(--dc-border) !important;
    border-radius: 8px !important;
    box-shadow: 0 8px 32px rgba(0,0,0,.55) !important;
    min-width: 200px !important;
    margin-top: 4px !important;
}

#jazzy-usermenu .dropdown-header {
    color: var(--dc-gold-lt) !important;
    font-size: 0.72rem !important;
    text-transform: uppercase;
    letter-spacing: .07em;
    padding: .5rem 1rem .3rem;
}

#jazzy-usermenu .dropdown-divider {
    border-top-color: var(--dc-border) !important;
    margin: .25rem 0 !important;
}

#jazzy-usermenu .dropdown-item,
#jazzy-usermenu .dropdown-footer {
    color: var(--dc-text) !important;
    font-size: .85rem !important;
    padding: .45rem 1rem !important;
    transition: background .15s;
}

#jazzy-usermenu .dropdown-item:hover,
#jazzy-usermenu .dropdown-footer:hover {
    background: rgba(212,160,23,.12) !important;
    color: var(--dc-gold-lt) !important;
}

#jazzy-usermenu .dropdown-item i {
    color: var(--dc-gold) !important;
    width: 16px;
}

/* Highlight the profile icon when the menu is open */
.main-header .nav-item.dropdown.show > .nav-link,
.main-header .nav-item.dropdown > .nav-link[aria-expanded="true"] {
    color: var(--dc-gold-lt) !important;
    background: rgba(212,160,23,.08) !important;
    border-radius: 6px;
}

/* ── Table row striping fix ─────────────────────────────────────── */
#result_list tbody tr:nth-child(even) {
    background: rgba(0,0,0,0.15) !important;
}

/* ── Make sure check_column (select all) shows ──────────────────── */
.action-checkbox input[type="checkbox"],
#action-toggle {
    accent-color: var(--dc-gold) !important;
}

